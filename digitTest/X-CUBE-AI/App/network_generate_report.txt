Neural Network Tools for STM32AI v1.5.1 (STM.ai v7.0.0-RC8)
Created date          : 2021-08-04 16:00:07
Parameters            : generate --name network -m /home/harshd/digitRcgSTM32.h5 --type keras --compression 8 --verbosity 1 --workspace /tmp/mxAI_workspace135621366707077790899948175495920 --output /home/harshd/.stm32cubemx

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------------------
model file            : /home/harshd/digitRcgSTM32.h5
type                  : keras
c_name                : network
compression           : 8
workspace dir         : /tmp/mxAI_workspace135621366707077790899948175495920
output dir            : /home/harshd/.stm32cubemx

model_name            : digitRcgSTM32
model_hash            : 7d9a2645209e2d7d7448b22377688aaf
input                 : input_0 [784 items, 3.06 KiB, ai_float, float, (1, 28, 28, 1)]
inputs (total)        : 3.06 KiB
output                : dense_1_nl [10 items, 40 B, ai_float, float, (1, 1, 1, 10)]
outputs (total)       : 40 B
params #              : 225,034 items (879.04 KiB)
macc                  : 2,688,960
weights (ro)          : 183,400 B (179.10 KiB) / -716,736(-79.6%) vs original model
activations (rw)      : 29,824 B (29.12 KiB) 
ram (total)           : 33,000 B (32.23 KiB) = 29,824 + 3,136 + 40

Model name - digitRcgSTM32 ['input_0'] ['dense_1_nl']
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type)                 oshape               param/size        macc        connected to      |   c_size             c_macc             c_type               
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
0    input_0 (Input)              (h:28, w:28, c:1)                                                    |                                        
     conv2d (Conv2D)              (h:26, w:26, c:32)   320/1,280         194,720     input_0           |                      +43,264(+22.2%)    optimized_conv2d()[0]
     conv2d_nl (Nonlinearity)     (h:26, w:26, c:32)                     21,632      conv2d            |                      -21,632(-100.0%)  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
1    max_pooling2d (Pool)         (h:13, w:13, c:32)                     21,632      conv2d_nl         |                      -21,632(-100.0%)  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
2    conv2d_1 (Conv2D)            (h:11, w:11, c:64)   18,496/73,984     2,230,336   max_pooling2d     |                      +14,144(+0.6%)     optimized_conv2d()[1]
     conv2d_1_nl (Nonlinearity)   (h:11, w:11, c:64)                     7,744       conv2d_1          |                      -7,744(-100.0%)   
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
3    max_pooling2d_1 (Pool)       (h:5, w:5, c:64)                       6,400       conv2d_1_nl       |                      -6,400(-100.0%)   
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
5    flatten (Reshape)            (c:1600)                                           max_pooling2d_1   |                                        
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
6    dense (Dense)                (c:128)              204,928/819,712   204,928     flatten           |   -716,736(-87.4%)                      dense(c4)[2]         
     dense_nl (Nonlinearity)      (c:128)                                128         dense             |                                         nl()[3]              
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
8    dense_1 (Dense)              (c:10)               1,290/5,160       1,290       dense_nl          |                                         dense()[4]           
     dense_1_nl (Nonlinearity)    (c:10)                                 150         dense_1           |                                         nl()/o[5]            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=2,688,960/2,688,960  weights=900,136/183,400 -716,736(-79.6%) activations=--/29,824 io=--/3,176



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : digitrcgstm32
c-name                : network
c-node #              : 6
c-array #             : 17
activations size      : 29824
weights size          : 183400
macc                  : 2688960
inputs                : ['input_0_output']
outputs               : ['dense_1_nl_output']



C-Arrays (17)
------------------------------------------------------------------------------------------------------------------------
c_id  name (*_array)     item/size           mem-pool     c-type       fmt        comment            
------------------------------------------------------------------------------------------------------------------------
0     input_0_output     784/3136            user         float        float      /input             
1     conv2d_output      5408/21632          activations  float        float                         
2     conv2d_1_output    1600/6400           activations  float        float                         
3     dense_output       128/512             activations  float        float                         
4     dense_nl_output    128/512             activations  float        float                         
5     dense_1_output     10/40               activations  float        float                         
6     dense_1_nl_output  10/40               user         float        float      /output            
7     conv2d_weights     288/1152            weights      const float  float                         
8     conv2d_bias        32/128              weights      const float  float                         
9     conv2d_1_weights   18432/73728         weights      const float  float                         
10    conv2d_1_bias      64/256              weights      const float  float                         
11    dense_weights      204800/102464       weights      const float  c4 (LUT4)                     
12    dense_bias         128/512             weights      const float  float                         
13    dense_1_weights    1280/5120           weights      const float  float                         
14    dense_1_bias       10/40               weights      const float  float                         
15    conv2d_scratch0    1664/6656           activations  float        float                         
16    conv2d_1_scratch0  1408/5632           activations  float        float                         
------------------------------------------------------------------------------------------------------------------------



C-Layers (6)
------------------------------------------------------------------------------------------------------------------------
c_id  name (*_layer)  id  layer_type        macc        rom         tensors               shape (array id)                       
------------------------------------------------------------------------------------------------------------------------
0     conv2d          1   optimized_conv2d  237984      1280        I: input_0_output     (1, 28, 28, 1) (0)                     
                                                                    S: conv2d_scratch0                                           
                                                                    W: conv2d_weights                                            
                                                                    W: conv2d_bias                                               
                                                                    O: conv2d_output      (1, 13, 13, 32) (1)                    
------------------------------------------------------------------------------------------------------------------------
1     conv2d_1        3   optimized_conv2d  2244480     73984       I: conv2d_output      (1, 13, 13, 32) (1)                    
                                                                    S: conv2d_1_scratch0                                         
                                                                    W: conv2d_1_weights                                          
                                                                    W: conv2d_1_bias                                             
                                                                    O: conv2d_1_output    (1, 5, 5, 64) (2)                      
------------------------------------------------------------------------------------------------------------------------
2     dense           6   dense             204928      102976      I: conv2d_1_output0   (1, 1, 1, 1600) (2)                    
                                                                    W: dense_weights                                             
                                                                    W: dense_bias                                                
                                                                    O: dense_output       (1, 1, 1, 128) (3)                     
------------------------------------------------------------------------------------------------------------------------
3     dense_nl        6   nl                128         0           I: dense_output       (1, 1, 1, 128) (3)                     
                                                                    O: dense_nl_output    (1, 1, 1, 128) (4)                     
------------------------------------------------------------------------------------------------------------------------
4     dense_1         8   dense             1290        5160        I: dense_nl_output    (1, 1, 1, 128) (4)                     
                                                                    W: dense_1_weights                                           
                                                                    W: dense_1_bias                                              
                                                                    O: dense_1_output     (1, 1, 1, 10) (5)                      
------------------------------------------------------------------------------------------------------------------------
5     dense_1_nl      8   nl                150         0           I: dense_1_output     (1, 1, 1, 10) (5)                      
                                                                    O: dense_1_nl_output  (1, 1, 1, 10) (6)                      
------------------------------------------------------------------------------------------------------------------------



Complexity report per layer - macc=2,688,960 weights=183,400 act=29,824 ram_io=3,176
---------------------------------------------------------------------------
id   name         c_macc                    c_rom                     c_id
---------------------------------------------------------------------------
0    conv2d       ||                 8.9%   |                  0.7%   [0] 
2    conv2d_1     ||||||||||||||||  83.5%   |||||||||||       40.3%   [1] 
6    dense        ||                 7.6%   ||||||||||||||||  56.1%   [2] 
6    dense_nl     |                  0.0%   |                  0.0%   [3] 
8    dense_1      |                  0.0%   |                  2.8%   [4] 
8    dense_1_nl   |                  0.0%   |                  0.0%   [5] 

Generated files (5)
----------------------------------------------------
/home/harshd/.stm32cubemx/network_config.h
/home/harshd/.stm32cubemx/network.h
/home/harshd/.stm32cubemx/network.c
/home/harshd/.stm32cubemx/network_data.h
/home/harshd/.stm32cubemx/network_data.c
